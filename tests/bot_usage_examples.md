
# Примеры сценариев работы с Telegram-ботом PortoAPI

## 1. Регистрация продавца и настройка кошелька

1. Отправьте команду `/start` — получите меню.
2. Отправьте `/register` — получите ссылку для настройки кошелька (offline-страница).
3. Настройте кошелек, отправьте xPub через web-страницу.

## 2. Добавление группы/покупателя

1. Отправьте `/add_buyer`.
2. Введите buyer_id (например, email или уникальный идентификатор покупателя).
3. Введите номер группы (BIP44 account, например 0, 1, 2...).
4. Получите подтверждение о добавлении группы.

## 3. Просмотр всех групп/покупателей

1. Отправьте `/buyers`.
2. Получите список всех ваших групп с buyer_id и номером группы.

## 4. Создание инвойса с привязкой к группе

1. Отправьте `/create_invoice`.
2. Введите сумму.
3. Введите описание.
4. Выберите нужного покупателя/группу из предложенного списка.
5. Получите адрес для оплаты и детали инвойса.

## 5. Оплата и вывод средств

1. Покупатель оплачивает инвойс на указанный адрес.
2. После поступления оплаты отправьте `/sweep` — бот обработает все оплаченные инвойсы и выведет средства.

---

**Примечание:**

- Для каждого покупателя/группы можно использовать отдельный xPub (BIP44 account).
- Все действия с seed/xPub выполняются только на offline-странице, приватные ключи не передаются на сервер.
